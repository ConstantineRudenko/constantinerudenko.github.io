<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Reference implementation</title>

    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../gameStyle.css">
</head>

<body>
    <div id="hp-bar" class="bordered">
        &nbsp;
        <!-- to set height -->
        <div id="hp-fill">
        </div>
        <div id="hp-text">
            hp: n/a
        </div>
    </div>

    <div id="container">
        <canvas id="game-canvas" class="bordered" width="600" height="400">
        </canvas>
        <div id="game-start" class="centered">
            <div class="play-button button bordered shadow">Play
            </div>
        </div>
        <div id="game-over" class="game-end">
            <div class="centered">
                <p>Game over!</p>
                <div class="play-button button bordered shadow">Play</div>
            </div>
        </div>
        <div id="victory" class="game-end">
            <div class="centered">
                <p>Victory!</p>
                <div class="play-button button bordered shadow">Play</div>
            </div>
        </div>
    </div>

    <script type="module">
        import Game from "./Game/Game.js";

        for (
            const element of Array.from(
                document.getElementsByClassName("play-button")
            )
        ) {
            element.addEventListener(
                "click",
                () => {
                    let game = new Game({
                    canvas: document.getElementById('game-canvas'),
                    logDiv: document.getElementById('game-log'),
                    gameOver: document.getElementById('game-over'),
                    victory: document.getElementById('victory'),
                    });

                    game.run();

                    document.getElementById("game-start").hidden = true;
                    document.getElementById("game-over").hidden = true;
                    document.getElementById("victory").hidden = true;

                    console.log("hah");
                }
            )
        }
    </script>

    <script>
        document.getElementById("game-over").hidden = true;
        document.getElementById("victory").hidden = true;
    </script>

    <div id="game-log" class="bordered">
    </div>

    <div>
        <h2>Rules:</h2>

        <p>
            <pre>
You control the blue circle (starting in bottom left corner).
Move using WSAD, attack with K.

You can only attack enemies when you touch them.
Be careful: enemies can attack you as well!

After making an attack you have to wait for a bit, before you can attack again.
This is indicated by the character being highlighted in red.
A highlighted (red) character can not attack.

You slowly regenerate health over time.
Engage enemies, when you have high health.
Then dodge and wait to get some health back.
            </pre>
        </p>
    </div>
</body>

</html>