<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Reference implementation</title>

    <!--
        if you have a server,
        it's better to use import/export instead of <script>

        but this will not work, if you just launch an html file
        from a folder on your PC
        
        https://javascript.info/import-export
    -->

    <script src="Game/Utility/DiceRoller.js"></script>
    <script src="Game/Utility/Cooldown.js"></script>
    <script src="Game/Utility/Vector2.js"></script>
    <script src="Game/Utility/Speed.js"></script>
    <script src="Game/Utility/InputManager.js"></script>

    <script src="Game/MVC/Controller.js"></script>
    <script src="Game/MVC/View.js"></script>

    <script src="Game/Character/CharacterModel.js"></script>
    <script src="Game/Character/CharacterView.js"></script>
    <script src="Game/Character/CharacterController.js"></script>

    <script src="Game/Character/Player/PlayerModel.js"></script>
    <script src="Game/Character/Player/PlayerView.js"></script>
    <script src="Game/Character/Player/PlayerController.js"></script>

    <script src="Game/Character/Enemy/EnemyModel.js"></script>
    <script src="Game/Character/Enemy/EnemyView.js"></script>
    <script src="Game/Character/Enemy/EnemyController.js"></script>

    <script src="Game/Character/Enemy/Thief/ThiefModel.js"></script>
    <script src="Game/Character/Enemy/Thief/ThiefView.js"></script>
    <script src="Game/Character/Enemy/Thief/ThiefController.js"></script>

    <script src="Game/Character/Enemy/Slime/SlimeModel.js"></script>
    <script src="Game/Character/Enemy/Slime/SlimeView.js"></script>
    <script src="Game/Character/Enemy/Slime/SlimeController.js"></script>

    <script src="Game/Character/Enemy/Skeleton/SkeletonModel.js"></script>
    <script src="Game/Character/Enemy/Skeleton/SkeletonView.js"></script>
    <script src="Game/Character/Enemy/Skeleton/SkeletonController.js"></script>

    <script src="Game/Game.js" defer></script>

    <!--
        with "defer" the script will only load after the <body>
     -->

    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../gameStyle.css">
</head>

<body>
    <h2>
        <a href="../index.html">Back</a>
    </h2>

    <div id="hp-bar" class="bordered">
        &nbsp;
        <!-- to set height -->
        <div id="hp-fill">
        </div>
        <div id="hp-text">
            hp: n/a
        </div>
    </div>

    <script>
        function play() {
            let game = new Game({
                canvas: document.getElementById('game-canvas'),
                logDiv: document.getElementById('game-log'),
                gameOver: document.getElementById('game-over'),
                victory: document.getElementById('victory'),
            });
            game.run();
            document.getElementById("play-button").hidden = true;
            document.getElementById("game-over").hidden = true;
            document.getElementById("victory").hidden = true;
        }
    </script>

    <div id="container">
        <canvas id="game-canvas" class="bordered" width="600" height="400">
        </canvas>
        <div class="centered">
            <div id="play-button" class="play-button button bordered shadow" onclick="play()">Play
            </div>
        </div>
        <div id="game-over" class="game-end">
            <div class="centered">
                <p>Game over!</p>
                <div class="play-button button bordered shadow" onclick="play()">Play</div>
            </div>
        </div>
        <div id="victory" class="game-end">
            <div class="centered">
                <p>Victory!</p>
                <div class="play-button button bordered shadow" onclick="play()">Play</div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("game-over").hidden = true;
        document.getElementById("victory").hidden = true;
    </script>

    <div id="game-log" class="bordered">
    </div>

    <div>
        <h2>Rules:</h2>

        <p>
            <pre>
You control the blue circle (starting in bottom left corner).
Move using WSAD, attack with K.

You can only attack enemies, when you touch them.
Be careful: enemies can attack you as well!

After making an attack you have to wait for a bit, before you can attack again.
This is indicated by the character being highlighted in red.
A highlighted (red) character can not attack.

You slowly regenerate health over time.
Engage enemies, when you have high health.
Then dodge and wait to get some health back.
            </pre>
        </p>
    </div>
</body>

</html>